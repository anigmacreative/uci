const nextJest = require('next/jest');\n\n// Providing the path to your Next.js app to load next.config.js and .env files\nconst createJestConfig = nextJest({\n  dir: './',\n});\n\n// Add any custom config to be passed to Jest\nconst customJestConfig = {\n  // Test environment settings\n  testEnvironment: 'jsdom',\n  setupFilesAfterEnv: ['<rootDir>/src/test/jest.setup.js'],\n  \n  // Test patterns\n  testMatch: [\n    '<rootDir>/src/**/__tests__/**/*.(js|jsx|ts|tsx)',\n    '<rootDir>/src/**/*.(test|spec).(js|jsx|ts|tsx)',\n    '<rootDir>/test/**/*.(test|spec).(js|jsx|ts|tsx)'\n  ],\n  \n  // Module name mapping for absolute imports\n  moduleNameMapping: {\n    '^@/(.*)$': '<rootDir>/src/$1',\n    '^@/components/(.*)$': '<rootDir>/src/components/$1',\n    '^@/lib/(.*)$': '<rootDir>/src/lib/$1',\n    '^@/types/(.*)$': '<rootDir>/src/types/$1',\n    '^@/test/(.*)$': '<rootDir>/src/test/$1'\n  },\n  \n  // Transform settings\n  transform: {\n    '^.+\\\\.(js|jsx|ts|tsx)$': ['babel-jest', { presets: ['next/babel'] }]\n  },\n  \n  // Module file extensions\n  moduleFileExtensions: ['ts', 'tsx', 'js', 'jsx', 'json'],\n  \n  // Coverage settings\n  collectCoverageFrom: [\n    'src/**/*.(js|jsx|ts|tsx)',\n    '!src/**/*.d.ts',\n    '!src/**/*.stories.(js|jsx|ts|tsx)',\n    '!src/test/**/*',\n    '!src/types/**/*',\n    '!src/**/index.(js|jsx|ts|tsx)'\n  ],\n  \n  coverageReporters: [\n    'text',\n    'lcov',\n    'html',\n    'json-summary'\n  ],\n  \n  coverageDirectory: 'coverage',\n  \n  // Coverage thresholds for CI/CD\n  coverageThreshold: {\n    global: {\n      branches: 80,\n      functions: 80,\n      lines: 80,\n      statements: 80\n    },\n    // Critical modules require higher coverage\n    'src/lib/identity/**': {\n      branches: 95,\n      functions: 95,\n      lines: 95,\n      statements: 95\n    },\n    'src/lib/blockchain/**': {\n      branches: 95,\n      functions: 95,\n      lines: 95,\n      statements: 95\n    },\n    'src/lib/economy/**': {\n      branches: 90,\n      functions: 90,\n      lines: 90,\n      statements: 90\n    }\n  },\n  \n  // Test timeout for blockchain operations\n  testTimeout: 30000,\n  \n  // Global setup and teardown\n  globalSetup: '<rootDir>/src/test/globalSetup.js',\n  globalTeardown: '<rootDir>/src/test/globalTeardown.js',\n  \n  // Environment variables for testing\n  setupFiles: ['<rootDir>/src/test/env.setup.js'],\n  \n  // Mock configurations\n  moduleNameMapping: {\n    // Mock external services in tests\n    '^axios$': '<rootDir>/src/test/mocks/axios.js',\n    '^socket.io-client$': '<rootDir>/src/test/mocks/socket.io.js',\n    '^@tensorflow/tfjs$': '<rootDir>/src/test/mocks/tensorflow.js',\n    '^ethers$': '<rootDir>/src/test/mocks/ethers.js',\n    '^stripe$': '<rootDir>/src/test/mocks/stripe.js'\n  },\n  \n  // Test reporters\n  reporters: [\n    'default',\n    ['jest-junit', {\n      outputDirectory: 'test-results',\n      outputName: 'junit.xml',\n      suiteName: 'Creative Identity Platform Tests'\n    }],\n    ['jest-html-reporters', {\n      publicPath: 'test-results',\n      filename: 'test-report.html',\n      openReport: false\n    }]\n  ],\n  \n  // Parallel test execution\n  maxWorkers: '50%',\n  \n  // Cache configuration\n  cacheDirectory: '.jest-cache',\n  \n  // Silent console logs in tests unless debugging\n  silent: process.env.NODE_ENV === 'test' && !process.env.DEBUG_TESTS,\n  \n  // Test categories via tags\n  testPathIgnorePatterns: [\n    '<rootDir>/.next/',\n    '<rootDir>/node_modules/',\n    '<rootDir>/dist/',\n    '<rootDir>/build/'\n  ],\n  \n  // Custom test suites\n  projects: [\n    {\n      displayName: 'Unit Tests',\n      testMatch: ['<rootDir>/src/**/*.unit.(test|spec).(js|jsx|ts|tsx)'],\n      testEnvironment: 'jsdom'\n    },\n    {\n      displayName: 'Integration Tests',\n      testMatch: ['<rootDir>/src/**/*.integration.(test|spec).(js|jsx|ts|tsx)'],\n      testEnvironment: 'node',\n      testTimeout: 60000\n    },\n    {\n      displayName: 'Blockchain Tests',\n      testMatch: ['<rootDir>/src/**/*.blockchain.(test|spec).(js|jsx|ts|tsx)'],\n      testEnvironment: 'node',\n      testTimeout: 120000\n    },\n    {\n      displayName: 'E2E Tests',\n      testMatch: ['<rootDir>/test/e2e/**/*.(test|spec).(js|jsx|ts|tsx)'],\n      testEnvironment: 'node',\n      testTimeout: 300000 // 5 minutes for E2E tests\n    }\n  ]\n};\n\n// Create Jest config which processes `next.config.js` and `.env.*` files\nmodule.exports = createJestConfig(customJestConfig);"